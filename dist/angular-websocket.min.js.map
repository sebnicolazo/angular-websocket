{"version":3,"sources":["dist/angular-websocket.js"],"names":["global","factory","define","amd","exports","module","require","mod","angular","ws","angularWebsocket","this","_angular","$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","ssl","test","scope","rootScopeFailover","useApplyAsync","initialTimeout","maxTimeout","reconnectIfNotNormalClose","binaryType","_reconnectAttempts","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","timeoutConnect","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_normalCloseCode","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_angular2","default","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","$applyAsync","code","indexOf","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","apply","currentCallback","exec","close","bufferedAmount","console","log","cancel","cancelableify","promise","then","reason","splice","reject","defer","isMocked","isConnected","mockSend","backoffDelay","_getBackoffDelay","backoffDelaySeconds","attempt","R","Math","random","T","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$log","Socket","createWebSocketBackend","warn","Object","defineProperty","value","obj","__esModule","_typeof","Symbol","iterator","constructor","Client","client","e","window","WebSocket","MozWebSocket","noop","freeze","Array","slice","elt","len","from","Number","ceil","service"],"mappings":"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"}